<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sauna Structure Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="control-panel">
            <div class="panel-header">
                <h1 class="logo">Sauna <span>Builder</span></h1>
                <p class="subtitle">
                    3D Structure Generator
                    <span class="live-indicator">
                        <span class="live-dot"></span>
                        LIVE
                    </span>
                </p>
            </div>

            <div class="panel-content">
                <!-- Save/Load Section -->
                <div class="section save-load-section">
                    <div class="section-title">Project</div>
                    <div class="input-row two-col">
                        <button class="action-btn" onclick="saveDesign()">
                            <span class="btn-icon">üíæ</span> Save Design
                        </button>
                        <label class="action-btn load-btn">
                            <span class="btn-icon">üìÇ</span> Load Design
                            <input type="file" id="loadFile" accept=".sauna,.json" onchange="loadDesign(event)" hidden>
                        </label>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Sauna Dimensions (meters)</div>
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label">Width (X)</label>
                            <input type="number" id="width" class="dimension-input" value="2.5" step="0.1" min="1">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Length (Z)</label>
                            <input type="number" id="length" class="dimension-input" value="3" step="0.1" min="1">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Height (Y)</label>
                            <input type="number" id="height" class="dimension-input" value="2.2" step="0.1" min="1.5">
                        </div>
                    </div>
                </div>

                <!-- Double Wall / Insulation Section -->
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span class="collapsible-title">üß± Double Wall & Insulation</span>
                        <span class="collapsible-icon">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="checkbox-group">
                                <input type="checkbox" id="doubleWall" class="checkbox-input" onchange="toggleDoubleWallConfig()">
                                <label for="doubleWall" class="checkbox-label">Enable Double Wall Construction</label>
                            </div>
                            <div id="doubleWallConfig" class="double-wall-config">
                                <div class="window-row">
                                    <div>
                                        <span class="mini-label">Wall Gap (cm)</span>
                                        <input type="number" id="wallGap" class="mini-input" value="10" step="1" min="5" max="20">
                                    </div>
                                    <div>
                                        <span class="mini-label">Insulation Type</span>
                                        <select id="insulationType" class="mini-input" style="padding: 6px 7px;">
                                            <option value="rockwool">Rock Wool</option>
                                            <option value="fiberglass">Fiberglass</option>
                                            <option value="foam">Spray Foam</option>
                                            <option value="none">None (Air Gap)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="showInsulation" class="checkbox-input" checked>
                                    <label for="showInsulation" class="checkbox-label">Show insulation in 3D view</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Roof Configuration -->
                <div class="collapsible open">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span class="collapsible-title">üè† Roof Configuration</span>
                        <span class="collapsible-icon">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="input-group">
                                <label class="input-label">Roof Type</label>
                                <select id="roofType" class="select-input">
                                    <option value="flat">Flat Roof</option>
                                    <option value="gable">Gable Roof (A-frame)</option>
                                    <option value="shed">Shed Roof (Slanted)</option>
                                    <option value="hip">Hip Roof</option>
                                </select>
                            </div>
                            <div class="input-row two-col">
                                <div class="input-group">
                                    <label class="input-label">Roof Height (m)</label>
                                    <input type="number" id="roofHeight" class="dimension-input" value="0.6" step="0.1" min="0.2">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Overhang (m)</label>
                                    <input type="number" id="roofOverhang" class="dimension-input" value="0.15" step="0.05" min="0">
                                </div>
                            </div>
                            <!-- Roof Direction (for Shed and Gable roofs) -->
                            <div id="roofDirectionGroup" class="input-group" style="display: none;">
                                <label class="input-label">Roof Direction</label>
                                <select id="roofDirection" class="select-input">
                                    <option value="left-right">Left ‚Üí Right (Low to High)</option>
                                    <option value="right-left">Right ‚Üí Left (High to Low)</option>
                                    <option value="front-back">Front ‚Üí Back</option>
                                    <option value="back-front">Back ‚Üí Front</option>
                                </select>
                            </div>
                            <div class="info-text" id="roofDirectionInfo" style="display: none;">
                                Roof direction determines which side is higher for shed roofs, or the ridge orientation for gable roofs.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collapsible open">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span class="collapsible-title">üö™ Door Configuration</span>
                        <span class="collapsible-icon">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="input-row two-col">
                                <div class="input-group">
                                    <label class="input-label">Width (m)</label>
                                    <input type="number" id="doorWidth" class="dimension-input" value="0.8" step="0.05" min="0.6">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Height (m)</label>
                                    <input type="number" id="doorHeight" class="dimension-input" value="1.9" step="0.05" min="1.5">
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Door Wall</label>
                                <select id="doorWall" class="select-input">
                                    <option value="front">Front Wall</option>
                                    <option value="back">Back Wall</option>
                                    <option value="left">Left Wall</option>
                                    <option value="right">Right Wall</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Position</label>
                                <input type="range" id="doorPosition" min="10" max="90" value="50">
                                <div class="range-labels">
                                    <span>Left</span>
                                    <span id="doorPosValue">Center</span>
                                    <span>Right</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span class="collapsible-title">ü™ü Windows</span>
                        <span class="collapsible-icon">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="checkbox-group">
                                <input type="checkbox" id="windowFront" class="checkbox-input" onchange="toggleWindowConfig('Front')">
                                <label for="windowFront" class="checkbox-label">Front Wall Window</label>
                            </div>
                            <div id="windowFrontConfig" class="window-config">
                                <div class="window-row">
                                    <div><span class="mini-label">Width (m)</span><input type="number" id="windowFrontWidth" class="mini-input" value="0.6" step="0.1"></div>
                                    <div><span class="mini-label">Height (m)</span><input type="number" id="windowFrontHeight" class="mini-input" value="0.5" step="0.1"></div>
                                </div>
                                <div class="window-row">
                                    <div><span class="mini-label">From Floor (m)</span><input type="number" id="windowFrontY" class="mini-input" value="1.2" step="0.1"></div>
                                    <div><span class="mini-label">Position (%)</span><input type="number" id="windowFrontX" class="mini-input" value="50" min="10" max="90"></div>
                                </div>
                                <button class="adapt-btn" onclick="autoAdaptWindow('Front')">üîß Auto-adapt to hole</button>
                                <div class="actual-size-info" id="windowFrontActual"></div>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="windowBack" class="checkbox-input" onchange="toggleWindowConfig('Back')">
                                <label for="windowBack" class="checkbox-label">Back Wall Window</label>
                            </div>
                            <div id="windowBackConfig" class="window-config">
                                <div class="window-row">
                                    <div><span class="mini-label">Width (m)</span><input type="number" id="windowBackWidth" class="mini-input" value="0.6" step="0.1"></div>
                                    <div><span class="mini-label">Height (m)</span><input type="number" id="windowBackHeight" class="mini-input" value="0.5" step="0.1"></div>
                                </div>
                                <div class="window-row">
                                    <div><span class="mini-label">From Floor (m)</span><input type="number" id="windowBackY" class="mini-input" value="1.2" step="0.1"></div>
                                    <div><span class="mini-label">Position (%)</span><input type="number" id="windowBackX" class="mini-input" value="50" min="10" max="90"></div>
                                </div>
                                <button class="adapt-btn" onclick="autoAdaptWindow('Back')">üîß Auto-adapt to hole</button>
                                <div class="actual-size-info" id="windowBackActual"></div>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="windowLeft" class="checkbox-input" onchange="toggleWindowConfig('Left')">
                                <label for="windowLeft" class="checkbox-label">Left Wall Window</label>
                            </div>
                            <div id="windowLeftConfig" class="window-config">
                                <div class="window-row">
                                    <div><span class="mini-label">Width (m)</span><input type="number" id="windowLeftWidth" class="mini-input" value="0.6" step="0.1"></div>
                                    <div><span class="mini-label">Height (m)</span><input type="number" id="windowLeftHeight" class="mini-input" value="0.5" step="0.1"></div>
                                </div>
                                <div class="window-row">
                                    <div><span class="mini-label">From Floor (m)</span><input type="number" id="windowLeftY" class="mini-input" value="1.2" step="0.1"></div>
                                    <div><span class="mini-label">Position (%)</span><input type="number" id="windowLeftX" class="mini-input" value="50" min="10" max="90"></div>
                                </div>
                                <button class="adapt-btn" onclick="autoAdaptWindow('Left')">üîß Auto-adapt to hole</button>
                                <div class="actual-size-info" id="windowLeftActual"></div>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="windowRight" class="checkbox-input" onchange="toggleWindowConfig('Right')">
                                <label for="windowRight" class="checkbox-label">Right Wall Window</label>
                            </div>
                            <div id="windowRightConfig" class="window-config">
                                <div class="window-row">
                                    <div><span class="mini-label">Width (m)</span><input type="number" id="windowRightWidth" class="mini-input" value="0.6" step="0.1"></div>
                                    <div><span class="mini-label">Height (m)</span><input type="number" id="windowRightHeight" class="mini-input" value="0.5" step="0.1"></div>
                                </div>
                                <div class="window-row">
                                    <div><span class="mini-label">From Floor (m)</span><input type="number" id="windowRightY" class="mini-input" value="1.2" step="0.1"></div>
                                    <div><span class="mini-label">Position (%)</span><input type="number" id="windowRightX" class="mini-input" value="50" min="10" max="90"></div>
                                </div>
                                <button class="adapt-btn" onclick="autoAdaptWindow('Right')">üîß Auto-adapt to hole</button>
                                <div class="actual-size-info" id="windowRightActual"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span class="collapsible-title">ü™µ Plank Dimensions</span>
                        <span class="collapsible-icon">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="input-row">
                                <div class="input-group">
                                    <label class="input-label">Width (cm)</label>
                                    <input type="number" id="plankWidth" class="dimension-input" value="10" step="1" min="5">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Thick (cm)</label>
                                    <input type="number" id="plankThickness" class="dimension-input" value="2" step="0.5" min="1">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Length (cm)</label>
                                    <input type="number" id="plankLength" class="dimension-input" value="250" step="10" min="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-footer">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">Outer Wall</div>
                        <div class="stat-value" id="wallPlanks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Inner Wall</div>
                        <div class="stat-value" id="innerWallPlanks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Roof</div>
                        <div class="stat-value" id="roofPlanks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Floor</div>
                        <div class="stat-value" id="floorPlanks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Gable</div>
                        <div class="stat-value" id="gablePlanks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Insulation</div>
                        <div class="stat-value" id="insulationPanels">0</div>
                    </div>
                    <div class="stat-item highlight">
                        <div class="stat-label">Total Planks</div>
                        <div class="stat-value" id="totalPlanks">0</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="viewer-section">
            <div class="viewer-header">
                <h2 class="viewer-title">3D Preview</h2>
                <div class="view-controls">
                    <button class="view-btn active" onclick="setView('perspective')">Perspective</button>
                    <button class="view-btn" onclick="setView('front')">Front</button>
                    <button class="view-btn" onclick="setView('side')">Side</button>
                    <button class="view-btn" onclick="setView('top')">Top</button>
                    <button class="view-btn" onclick="resetCamera()">Reset</button>
                </div>
            </div>
            <div id="canvas-container"></div>
            <div class="instructions">
                <span>üñ±Ô∏è Drag: Orbit</span>
                <span>üñ±Ô∏è Scroll: Zoom</span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>